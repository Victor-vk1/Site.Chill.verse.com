<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ChillVerse Login</title>

<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
        font-family: Arial, sans-serif;
    }

    /* Floating bubbles */
    .bubble {
        position: absolute;
        bottom: -200px;
        width: 40px;
        height: 40px;
        background: rgba(0, 255, 255, 0.3);
        border-radius: 50%;
        animation: rise 10s infinite ease-in;
        filter: blur(3px);
    }

    @keyframes rise {
        0% { transform: translateY(0) scale(1); opacity: 1; }
        100% { transform: translateY(-120vh) scale(1.5); opacity: 0; }
    }

    /* Login Glass Card */
    .glass-card {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 350px;
        padding: 25px;
        border-radius: 20px;
        backdrop-filter: blur(15px);
        background: rgba(255, 255, 255, 0.06);
        border: 2px solid rgba(255, 255, 255, 0.1);
        text-align: center;
    }

    /* Neon ChillVerse */
    .title {
        font-size: 32px;
        font-weight: bold;
        animation: neon 4s linear infinite;
    }

    @keyframes neon {
        0% { color: #00ff99; text-shadow: 0 0 10px #00ff99; }
        16% { color: yellow; text-shadow: 0 0 10px yellow; }
        32% { color: orange; text-shadow: 0 0 10px orange; }
        48% { color: red; text-shadow: 0 0 10px red; }
        64% { color: pink; text-shadow: 0 0 10px pink; }
        80% { color: purple; text-shadow: 0 0 10px purple; }
        100% { color: cyan; text-shadow: 0 0 10px cyan; }
    }

    input {
        width: 80%;
        padding: 10px;
        margin: 8px 0;
        border-radius: 10px;
        border: none;
        outline: none;
    }

    button {
        width: 85%;
        padding: 12px;
        border: none;
        border-radius: 10px;
        background: cyan;
        font-size: 15px;
        margin-top: 10px;
        cursor: pointer;
        font-weight: bold;
    }

    .error {
        color: red;
        margin-top: 10px;
        animation: flash 0.2s alternate 6;
    }

    @keyframes flash {
        from { opacity: 1; }
        to { opacity: 0; }
    }

</style>
</head>
<body>

<!-- Floating Bubble Generator -->
<script>
for (let i = 0; i < 25; i++) {
    let b = document.createElement("div");
    b.className = "bubble";
    b.style.left = Math.random() * 100 + "vw";
    b.style.animationDuration = (8 + Math.random() * 6) + "s";
    b.style.width = b.style.height = (20 + Math.random() * 40) + "px";
    document.body.appendChild(b);
}
</script>

<div class="glass-card" id="loginCard">
    <div class="title">ChillVerse</div>
    <p id="subtext">Log in to access ChillVerse</p>

    <div id="usernameSection">
        <input type="text" id="setUsername" placeholder="Set Username">
        <button onclick="saveUsername()">Save Username</button>
    </div>

    <div id="passwordSection">
        <input type="password" id="passwordInput" placeholder="Enter Password">
        <button onclick="login()">Login</button>
    </div>

    <p id="errorBox"></p>

    <button onclick="showPasswordChange()" id="changePassBtn" style="margin-top:15px; display:none;">Change Password</button>
</div>


<!-- Password Change UI -->
<div class="glass-card" id="changePassCard" style="display:none;">
    <h3>Change Password</h3>
    <input type="password" id="oldPass" placeholder="Old Password">
    <input type="password" id="newPass" placeholder="New Password">
    <button onclick="changePassword()">Confirm</button>
    <button onclick="closeChange()" style="background:red;">Cancel</button>
    <p id="changeMsg"></p>
</div>

<script>
let tries = 0;

// Hide username section if already set
window.onload = () => {
    if (localStorage.getItem("cv_username")) {
        document.getElementById("usernameSection").style.display = "none";
    }
    if (localStorage.getItem("cv_password")) {
        document.getElementById("passwordInput").placeholder = "Enter Password";
    }
};

// Save Username Permanently
function saveUsername() {
    let name = document.getElementById("setUsername").value.trim();
    if (name === "") return;

    localStorage.setItem("cv_username", name);
    document.getElementById("usernameSection").style.display = "none";
}

// Login System
function login() {
    let input = document.getElementById("passwordInput").value;
    let savedPass = localStorage.getItem("cv_password");

    // First time password setup
    if (!savedPass) {
        localStorage.setItem("cv_password", input);
        alert("Password Set Successfully!");
        return;
    }

    if (input !== savedPass) {
        tries++;
        document.getElementById("errorBox").innerHTML = "Wrong Password!";
        if (tries >= 5) {
            document.getElementById("errorBox").innerHTML = "Too many attempts. Contact admin for reset.";
        }
        return;
    }

    // Correct password
    location.href = "main.html"; // your main site link
}

// Show password change panel
function showPasswordChange() {
    document.getElementById("loginCard").style.display = "none";
    document.getElementById("changePassCard").style.display = "block";
}

// Change password
function changePassword() {
    let oldP = document.getElementById("oldPass").value;
    let newP = document.getElementById("newPass").value;
    let saved = localStorage.getItem("cv_password");

    if (oldP !== saved) {
        document.getElementById("changeMsg").innerHTML = "Incorrect old password!";
        return;
    }

    localStorage.setItem("cv_password", newP);
    document.getElementById("changeMsg").innerHTML = "Password changed successfully!";
}

// Close password change panel
function closeChange() {
    document.getElementById("changePassCard").style.display = "none";
    document.getElementById("loginCard").style.display = "block";
}
</script>

</body>
</html>
